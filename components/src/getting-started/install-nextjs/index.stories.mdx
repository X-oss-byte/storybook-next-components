---
title: Installation in Next.js project | gluestack-ui

description: To get started with gluestack-ui, check out this quick installation guide. It provides simple steps to help you install and use the library in your projects.

pageTitle: Installation

pageDescription: To get started with gluestack-ui, check out this quick installation guide. It provides simple steps to help you install and use the library in your projects.

showHeader: true
---

import { Canvas, Meta, Story } from '@storybook/addon-docs';

<Meta title="Getting Started/Install in Next.js" />

import { AppProvider, Link, Box, HStack, Text } from '@gluestack/design-system';

# Install in Next.js project

In this guide, we will walk you through the steps required to add gluestack-ui to your Next project.

## New Project

If you are starting with a new project, you can directly install the template.

### For NextJs App routers

<br />

You can directly install the template using the following command:

#### Using custom command

```bash
npx create-next-app-with-gluestack-ui@latest
```

OR

#### Using create next app

For NextJs App routers which supports React Server Components, you can directly install the template using the following command:

```bash
yarn create next-app -example https://github.com/gluestack/nextjs-app-router
```

For NextJs pages routers, you can directly install the template using the following command:

```bash
yarn create next-app -example https://github.com/gluestack/nextjs-page-router
```

The above command will create a new Next.js project with all the components of gluestack-ui installed and configured.

You can directly use all the components of gluestack-ui in your project.

## Existing Project

If you have an already created Next.js project then just follow the below steps. We will cover initial setup, configuring the provider, and adding a new component.

### Step 1: Installation and Initial Setup

First, install the latest version of gluestack-ui in your project. This can be done using the following command:

```bash
npx gluestack-ui@latest
```

This command performs the following tasks:

- Asks the path where you want all the components to be installed.
- Checks if gluestack-ui is already installed in the project. If not, it creates a new `gluestack-ui.config.ts` file at the root of your project. This file contains the default theme.
- Creates a `GluestackUIProvider`, a wrapper component in the path specified.
- Add a `styled` function created using [FontResolver](https://style.gluestack.io/docs/plugins/fonts-plugin) and [AnimationResolver](https://style.gluestack.io/docs/plugins/animation-plugin) plugins.
- Installs the required dependencies: `@gluestack-style/react`, `@gluestack-style/animation-plugin`, and `@gluestack-ui/provider`.

### Step 2: Server-side rendering (SSR)

It's also recommended to set up your server-side rendering (SSR) correctly. To do this, you will need to use the `flush()` function exported by the [@gluestack-style/react](https://style.gluestack.io/docs/configuration/ssr).

#### NextJs App Routers (which supports React Server Components)

- For NextJs App Routers we will create a new `registry.tsx` file in the root of your project and use the flush function from `@gluestack-style/react`:

```jsx
'use client';

import React, { useRef, useState } from 'react';
import { useServerInsertedHTML } from 'next/navigation';
import { StyleRegistry, createStyleRegistry } from 'styled-jsx';
import { Html, Head, Main, NextScript } from 'next/document';
// @ts-ignore
import { AppRegistry } from 'react-native-web';
import { flush } from '@gluestack-style/react';

export default function StyledJsxRegistry({
  children,
}: {
  children: React.ReactNode,
}) {
  // Only create stylesheet once with lazy initial state
  // x-ref: https://reactjs.org/docs/hooks-reference.html#lazy-initial-state
  const [jsxStyleRegistry] = useState(() => createStyleRegistry());

  useServerInsertedHTML(() => {
    AppRegistry.registerComponent('Main', () => Main);
    const { getStyleElement } = AppRegistry.getApplication('Main');
    const styles = [getStyleElement(), jsxStyleRegistry.styles(), ...flush()];
    jsxStyleRegistry.flush();
    return <>{styles}</>;
  });

  return <StyleRegistry registry={jsxStyleRegistry}>{children}</StyleRegistry>;
}
```

- We also need to add `className="gs"` to the `<html>` element in the `layout.tsx` file
- We also need to wrap `children` with `StyledJsxRegistry` in the `layout.tsx` file

The code in `layout.tsx` file at this point of time will look like this:

```jsx
import './globals.css';
import { Inter } from 'next/font/google';
import StyledJsxRegistry from './registry';

const inter = Inter({ subsets: ['latin'] });

export const metadata = {
  title: 'Create Next App',
  description: 'Generated by create next app',
};

export default function RootLayout({
  children,
}: {
  children: React.ReactNode,
}) {
  return (
    <html lang="en" className="gs">
      <body className={inter.className}>
        <StyledJsxRegistry>{children}</StyledJsxRegistry>
      </body>
    </html>
  );
}
```

#### NextJs Page Routers

To prevent flickering, the `gs` class should be attached, which increases the specificity of any inline styles that are being used.

```jsx
import * as React from 'react';
import { Html, Head, Main, NextScript } from 'next/document';
import { AppRegistry } from 'react-native-web';
import { flush } from '@gluestack-style/react';

function Document() {
  return (
    <Html className="gs" lang="en">
      <Head />
      <body>
        <Main />
        <NextScript />
      </body>
    </Html>
  );
}

Document.getInitialProps = async ({ renderPage }: any) => {
  AppRegistry.registerComponent('Main', () => Main);
  const { getStyleElement } = AppRegistry.getApplication('Main');
  const page = await renderPage();
  const styles = [getStyleElement(), ...flush()];
  return { ...page, styles: React.Children.toArray(styles) };
};

export default Document;
```

### Step 3: Setup @gluestack/ui-next-adapter

To use `gluestack-ui` components with server-side rendering, you need to configure your project to transpile the modules correctly. The easiest way to do this is by using the `withGluestackUI` Next.js adapter. This adapter adds the necessary configuration to your project to ensure that your gluestack-ui components are transpiled correctly for server-side rendering.

Make the following changes in `next.config.js`

```jsx
/** @type {import('next').NextConfig} */
// eslint-disable-next-line @typescript-eslint/no-var-requires
const { withGluestackUI } = require('@gluestack/ui-next-adapter');

const nextConfig = {
  reactStrictMode: true,
};

module.exports = withGluestackUI(nextConfig);
```

### Step 4: Setup provider

`GluestackUIProvider` is a component that makes the aliases and tokens available throughout your app. It uses React's Context API.

#### NextJs App Routers (which supports React Server Components)

- For NextJs App Routers we will create a new `providers.tsx` file in the `app` folder which will return a client component. Now, add the following code:

```jsx
// app/providers.tsx
'use client';

import { GluestackUIProvider } from '../components';
import { config } from '../gluestack-ui.config';

export function Providers({ children }: { children: React.ReactNode }) {
  return (
    <GluestackUIProvider config={config.theme}>{children}</GluestackUIProvider>
  );
}
```

This component returns a `GluestackUIProvider` component which wraps the `children` with the theme from `gluestack-ui.config.ts` file.

- After creating `providers.tsx` file, we need to wrap the exported `GluestackUIProvider` component around the `children` in `layout.tsx` file. The code in `layout.tsx` file at this point of time will look like this:

```jsx
import './globals.css';
import { Inter } from 'next/font/google';
import { Providers } from './providers';
import StyledJsxRegistry from './registry';

const inter = Inter({ subsets: ['latin'] });

export const metadata = {
  title: 'Create Next App',
  description: 'Generated by create next app',
};

export default function RootLayout({
  children,
}: {
  children: React.ReactNode,
}) {
  return (
    <html lang="en" className="gs gs-light">
      <body className={inter.className}>
        <Providers>
          <StyledJsxRegistry>{children}</StyledJsxRegistry>
        </Providers>
      </body>
    </html>
  );
}
```

#### NextJs Page Routers

For NextJs Page Router just add `GluestackUIProvider` to the root of your app and update `_app.tsx` as follows:

```jsx
import '@/styles/globals.css';
import type { AppProps } from 'next/app';
import { GluestackUIProvider } from '../components';
import { config } from '../gluestack-ui.config';

export default function App({ Component, pageProps }: AppProps) {
  return (
    <GluestackUIProvider config={config.theme}>
      <Component {...pageProps} />
    </GluestackUIProvider>
  );
}
```

For components to work properly we need to wrap our components with `<GluestackUIProvider />` and pass the theme from `gluestack-ui.config.ts` file.

### Step 4: Component Adder

We can add a new component using npx `npx gluestack-ui@latest add <component-name>`. For example, to add the button component package, you can run the following command:

```bash
npx gluestack-ui@latest add button
```

This will install the `@gluestack-ui/button` package and add it to your project's dependencies. This will add the necessary code to your project, including importing the `createButton` function and creating a `Button` component using it.

### Run the Hello World example:

After installing the component, you can use it in your app by importing it and rendering it in your JSX. For example:

```jsx
import { Button } from '../../components';

export default function Home() {
  return (
    <Button onPress={() => alert('Clicked!')}>
      <Button.Text>Click me!</Button.Text>
    </Button>
  );
}
```

Yey! you are all set, start editing src/pages/index.tsx now.
